<html>
<head>
	<title></title>
	<script type="application/javascript" src="js/jquery-1.8.3.min.js"></script>
	<script type="application/javascript" src="js/nskyimage.js"></script>
	<script type="application/javascript" src="js/nskyimage.layer.js"></script>
	<script type="application/javascript" src="js/nskyimage.blend.js"></script>
	<script type="application/javascript" src="js/nskyimage.layerfx.js"></script>
	<script type="application/javascript">
		$(document).ready(function() {

			nsky.Init();

			var layer = new nsky.Layer();
			var layer2= new nsky.Layer();

			var img = new Image();
			img.onload = function() {

				var img2 = new Image();
				layer.setDataFromImage(img);
				img2.onload = function() {
					layer2.setDataFromImage(img2);
					layer2.offset.x = 10;

					var result = layer2.blend({
						data : layer.data,
						size : layer.size,
						offset : {
							x : 0,
							y : 10
						},
						blend: nsky.Layer.Blend.multiply
					});

					var gammaFx = new nsky.FxLayer.GammaCorrect();
					result = gammaFx.blend($.extend({
						gamma : 0.5
					}, result));

					var hslFx = new nsky.FxLayer.HSLModulate();
					result = hslFx.blend(result);

					console.log(result);

					nsky.Canvas.flip(result);
				}


				img2.src = "img/test-gra.png";



			}

			img.src = "img/test-red.png";
			

		});
	</script>
</head>
<body>
	<div id="stage"></div>
</body>
</html>